//Percentile
function percentileVisibleCount(e){var t=$(window).width();for(var i in e)if(e.hasOwnProperty(i)&&("full"==i||parseInt(i)>=t))return e[i]}function percentileSlideWidth(e,t){return t>e?100/e:100/t}function percentileGetWidthPercent(e){return 100*parseFloat(e.css("width"))/parseFloat(e.parent().css("width"))+"%"}function percentileGetWidthPercentInt(e){return parseInt(100*parseFloat(e.css("width"))/parseFloat(e.parent().css("width")))}function percentileHeightWidth(e,t){return e.each(function(){var e=percentileSlideWidth($(this).find(t.slides).length,percentileVisibleCount(jQuery.parseJSON(t.breakpoints)));$(this).find(t.slides).css("width",e+"%"),$(this).css("height",$(this).find(t.slides).first().height())})}function percentileCreateRotate(e,t,i,n){return e.each(function(){if(i>n){$(t.next+", "+t.prev).addClass("active");var e=percentileSlideWidth(i,n),s=0;$(this).find(t.slides).each(function(){$(this).css("position","absolute"),$(this).css("left",e*s+"%"),s++})}else $(t.next+", "+t.prev).removeClass("active"),$(this).find(t.slides).css("left","auto"),$(this).find(t.slides).css("position","relative")})}!function(e){e.fn.percentile=function(t){function i(i,n){0==r&&i.each(function(){var i=e(this);i.find(t.slides).each(function(){var t=parseInt(this.style.width.replace("%","")),i=this;"next"==n&&parseInt(this.style.left.replace("%",""))<0?e(this).css("left",l+"%"):"next"!=n&&parseInt(this.style.left.replace("%",""))>=l&&e(this).css("left",t-2*t+"%"),setTimeout(function(){var s=t;"next"==n&&(s-=2*s),s+=parseInt(i.style.left.replace("%","")),r=!0,e(i).addClass("animation"),e(i).css("left",s+"%"),e(i).css("z-index","0")},100)})})}var n={slides:".slide",breakpoints:'{ "full": 3, "768": 2, "420": 1 }',next:".slides .next",prev:".slides .prev"},t=e.extend(n,t),s=this,r=!1;percentileHeightWidth(s,t),e(this).find(t.slides).on("transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",function(){r=!1,e(this).removeClass("animation")}),e(t.next).click(function(e){e.preventDefault(),i(s,"next")}),e(t.prev).click(function(e){e.preventDefault(),i(s,"prev")}),percentileCreateRotate(s,t,s.find(t.slides).length,percentileVisibleCount(jQuery.parseJSON(t.breakpoints)));var l=0;s.find(t.slides).each(function(){parseInt(this.style.left.replace("%",""))>l&&(l=parseInt(this.style.left.replace("%","")))}),e(window).bind("resize",e.proxy(function(){l=0,s.find(t.slides).each(function(){console.log("last"+l),parseInt(this.style.left.replace("%",""))>l&&(l=parseInt(this.style.left.replace("%","")))}),percentileHeightWidth(s,t),percentileCreateRotate(s,t,e(this).find(t.slides).length,percentileVisibleCount(jQuery.parseJSON(t.breakpoints)))},this))}}(jQuery);